<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>graph · P2P.ai</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="P2P.ai logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">P2P.ai</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../define/">Define Problem</a></li><li><a class="tocitem" href="../path/">How did we get here</a></li><li><a class="tocitem" href="../process/">what do we know</a></li><li><a class="tocitem" href="../facts/">get Facts straight</a></li><li class="is-active"><a class="tocitem" href>graph</a><ul class="internal"><li><a class="tocitem" href="#create-graph,-vertices-and-edges"><span>create graph, vertices and edges</span></a></li><li><a class="tocitem" href="#Finance-Graph"><span>Finance Graph</span></a></li><li><a class="tocitem" href="#Supply-Chain-Graph"><span>Supply Chain Graph</span></a></li></ul></li><li><a class="tocitem" href="../query/">data insights</a></li><li><a class="tocitem" href="../analytics/">analytics</a></li><li><a class="tocitem" href="../ml/">AI predictions</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>graph</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>graph</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/AmitXShukla/P2P.ai/blob/master/src/P2P.jl/docs/src/graph.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Graph-Analysis"><a class="docs-heading-anchor" href="#Graph-Analysis">Graph Analysis</a><a id="Graph-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Graph-Analysis" title="Permalink"></a></h1><p>In previous chapter, we loaded physical ERDs with actual datasets in Julia DataFrames. I also shared, JuliaLang scripts to export these ERP datasets in csv.</p><p>In this chapter, we will create a <strong>complete ERP graph</strong> with vertices, edges and load these datasets into ERP P2P Graph.</p><p>let&#39;s get started.</p><hr/><h2 id="create-graph,-vertices-and-edges"><a class="docs-heading-anchor" href="#create-graph,-vertices-and-edges">create graph, vertices and edges</a><a id="create-graph,-vertices-and-edges-1"></a><a class="docs-heading-anchor-permalink" href="#create-graph,-vertices-and-edges" title="Permalink"></a></h2><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Below code is an example of using Julia Langauge to call pytigergraph Python package, run GSQLs on TGCLOUD.</p><p>In future, depending on demand, I may write pytigergprah package in Julia Lang.</p></div></div><pre><code class="language-julia hljs">import Pkg
# you may not need to add conda, pytigergraph
# if you already have python setup
# these instructions are specific for julia setup
Pkg.add(&quot;Conda&quot;)
ENV[&quot;PYTHON&quot;] = &quot;/usr/bin/python3&quot;
using PyCall
using Conda
Conda.pip_interop(true;)
# Conda.pip_interop(true; [env::Environment=&quot;/usr/bin/python3&quot;])
Conda.pip(&quot;install&quot;, &quot;pyTigerGraph&quot;)
Conda.add(&quot;pyTigerGraph&quot;)
tg = pyimport(&quot;pyTigerGraph&quot;)
# please don&#39;t expect below credentials to work for you, and signup at tgcloud
hostName = &quot;https://p2p.i.tgcloud.io&quot;
userName = &quot;amit&quot;
password = &quot;password&quot;
graphName = &quot;P2PFinSCM&quot;
conn = tg.TigerGraphConnection(host=hostName, username=userName, password=password, graphname=graphName)
# conn.gsql(getSchema)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">PyObject &lt;pyTigerGraph.pyTigerGraph.TigerGraphConnection object at 0x7f66a67a26d0&gt;</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Below code is directly executed over Python environment</p><p>first you will also need to install pyTigerGraph in your python environment,</p><p>!pip install -U pyTigerGraph</p><p>then execute following commands to create TGCloud Graph</p></div></div><h2 id="Finance-Graph"><a class="docs-heading-anchor" href="#Finance-Graph">Finance Graph</a><a id="Finance-Graph-1"></a><a class="docs-heading-anchor-permalink" href="#Finance-Graph" title="Permalink"></a></h2><pre><code class="language- hljs">import pyTigerGraph as tg
hostName = &quot;https://p2p.i.tgcloud.io&quot;
userName = &quot;amit&quot;
password = &quot;password&quot;
graphName = &quot;P2PFinSCM&quot;
conn = tg.TigerGraphConnection(host=hostName, username=userName, password=password, graphname=graphName)

conn.gsql(&quot;ls&quot;)
conn.gsql(&#39;&#39;&#39;USE GLOBAL
DROP ALL
&#39;&#39;&#39;)

conn.gsql(&#39;&#39;&#39;
  USE GLOBAL
  CREATE VERTEX Account (PRIMARY_ID ID INT, ENTITY STRING, AS_OF_DATE DATETIME, CLASSIFICATION STRING,CATEGORY STRING, STATUS STRING,DESCR STRING,ACCOUNT_TYPE STRING) WITH primary_id_as_attribute=&quot;true&quot;
  CREATE VERTEX Location (PRIMARY_ID ID INT, AS_OF_DATE DATETIME, CLASSIFICATION STRING,CATEGORY STRING, STATUS STRING,DESCR STRING,LOC_TYPE STRING) WITH primary_id_as_attribute=&quot;true&quot;
  CREATE VERTEX Department (PRIMARY_ID ID INT, AS_OF_DATE DATETIME, CLASSIFICATION STRING,CATEGORY STRING, STATUS STRING,DESCR STRING,DEPT_TYPE STRING) WITH primary_id_as_attribute=&quot;true&quot;
  CREATE VERTEX Ledger (PRIMARY_ID LEDGER STRING, FISCAL_YEAR INT, PERIOD INT, ORGID STRING, OPER_UNIT STRING, ACCOUNT INT, DEPT INT, LOCATION INT, POSTED_TOTAL STRING) WITH primary_id_as_attribute=&quot;true&quot;
  CREATE DIRECTED EDGE by_account (From Ledger, To Account) WITH REVERSE_EDGE=&quot;account_family&quot;
  CREATE DIRECTED EDGE by_location (From Ledger, To Location) WITH REVERSE_EDGE=&quot;region&quot;
  CREATE DIRECTED EDGE by_department (From Ledger, To Department) WITH REVERSE_EDGE=&quot;dept_class&quot;
&#39;&#39;&#39;)
results = conn.gsql(&#39;CREATE GRAPH P2PFinSCM(Account, Location, Department, Ledger, by_account, by_location, by_department)&#39;)</code></pre><p><img src="https://github.com/AmitXShukla/P2P.ai/blob/main/docs/assets/images/graphp2p1.png?raw=true" alt="P2P Graph 1"/></p><h4 id="Loading-Data"><a class="docs-heading-anchor" href="#Loading-Data">Loading Data</a><a id="Loading-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-Data" title="Permalink"></a></h4><pre><code class="language-example hljs">conn.gsql(&#39;&#39;&#39;
USE GLOBAL
USE GRAPH P2P
CREATE LOADING JOB P2P_PATH FOR GRAPH P2P {
DEFINE FILENAME file1 = &quot;sampleData/accounts.csv&quot;;
DEFINE FILENAME file2 = &quot;sampleData/locations.csv&quot;;
DEFINE FILENAME file3 = &quot;sampleData/department.csv&quot;;
DEFINE FILENAME file4 = &quot;sampleData/ledger.csv&quot;;
LOAD file1 TO VERTEX Account VALUES ($&quot;ENTITY&quot;, $&quot;AS_OF_DATE&quot;, $&quot;ID&quot;, $&quot;CLASSIFICATION&quot;, $&quot;CATEGORY&quot;, $&quot;STATUS&quot;, $&quot;DESCR&quot;, $&quot;ACCOUNT_TYPE&quot;) USING header=&quot;true&quot;, separator=&quot;,&quot;;
LOAD file2 TO VERTEX Location VALUES ($&quot;AS_OF_DATE&quot;, $&quot;ID&quot;, $&quot;CLASSIFICATION&quot;, $&quot;CATEGORY&quot;, $&quot;STATUS&quot;, $&quot;DESCR&quot;, $&quot;LOC_TYPE&quot;) USING header=&quot;true&quot;, separator=&quot;,&quot;;
LOAD file2 TO VERTEX Department VALUES ($&quot;AS_OF_DATE&quot;, $&quot;ID&quot;, $&quot;CLASSIFICATION&quot;, $&quot;CATEGORY&quot;, $&quot;STATUS&quot;, $&quot;DESCR&quot;, $&quot;DEPT_TYPE&quot;) USING header=&quot;true&quot;, separator=&quot;,&quot;;
LOAD file4 TO VERTEX Ledger VALUES ($&quot;LEDGER&quot;, $&quot;FISCAL_YEAR&quot;, $&quot;PERIOD&quot;, $&quot;ORGID&quot;, $&quot;OPER_UNIT&quot;, $&quot;ACCOUNT&quot;, $&quot;DEPT&quot;, $&quot;LOCATION&quot;, $&quot;POSTED_TOTAL&quot;) USING header=&quot;true&quot;, separator=&quot;,&quot;;
}
&#39;&#39;&#39;)
results = conn.gsql(&#39;RUN LOADING JOB P2P_PATH USING file1=&quot;sampleData/galaxy.csv&quot;, &quot;sampleData/species.csv&quot;, &quot;sampleData/itemmaster.csv&quot;&#39;)</code></pre><p>You can also manually upload your data to TGCloud.</p><pre><code class="nohighlight hljs">Please see, a copy of datasets can be found inside sampleData folder. or use sampleData jupter notebook to generate more volume data sets.</code></pre><p><img src="https://github.com/AmitXShukla/P2P.ai/blob/main/docs/assets/images/graphp2p2.png?raw=true" alt="P2P Graph 2"/></p><p>You can also manually map your data to vertices/edges in TGCloud.</p><p><strong>Do NOT forget to publish your data mappings and load data.</strong></p><p><img src="https://github.com/AmitXShukla/P2P.ai/blob/main/docs/assets/images/graphp2p3.png?raw=true" alt="P2P Graph 3"/></p><h2 id="Supply-Chain-Graph"><a class="docs-heading-anchor" href="#Supply-Chain-Graph">Supply Chain Graph</a><a id="Supply-Chain-Graph-1"></a><a class="docs-heading-anchor-permalink" href="#Supply-Chain-Graph" title="Permalink"></a></h2><pre><code class="language- hljs">import pyTigerGraph as tg
hostName = &quot;https://p2p.i.tgcloud.io&quot;
userName = &quot;amit&quot;
password = &quot;password&quot;
graphName = &quot;P2PSCM&quot;
conn = tg.TigerGraphConnection(host=hostName, username=userName, password=password, graphname=graphName)

conn.gsql(&quot;ls&quot;)
conn.gsql(&#39;&#39;&#39;USE GLOBAL
DROP ALL
&#39;&#39;&#39;)

conn.gsql(&#39;&#39;&#39;
USE GLOBAL

CREATE VERTEX UNSPSC (PRIMARY_ID Code INT, KeyTO STRING, PARENT_KEY STRING, Title STRING) WITH primary_id_as_attribute=&quot;true&quot;
CREATE VERTEX GUDID (PRIMARY_ID PrimaryDI STRING, publicDeviceRecordKey STRING, publicVersionStatus STRING, deviceRecordStatus STRING, publicVersionNumber STRING, publicVersionDate STRING, devicePublishDate STRING, deviceCommDistributionEndDate STRING, deviceCommDistributionStatus STRING, brandName STRING, versionModelNumber STRING, catalogNumber STRING, dunsNumber STRING, companyName STRING, deviceCount STRING, deviceDescription STRING, DMExempt STRING, premarketExempt STRING, deviceHCTP STRING, deviceKit STRING, deviceCombinationProduct STRING, singleUse STRING, lotBatch STRING, serialNumber STRING, manufacturingDate STRING, expirationDate STRING, donationIdNumber STRING, labeledContainsNRL STRING, labeledNoNRL STRING, MRISafetyStatus STRING, rx STRING, otc STRING, deviceSterile STRING, sterilizationPriorToUse STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX LOCATION_MASTER (PRIMARY_ID city STRING, city_ascii STRING, state_id STRING, state_name STRING, county_fips STRING, county_name STRING, lat STRING, lng STRING, population STRING, density STRING, source STRING, military STRING, incorporated STRING, timezone STRING, ranking STRING, zips STRING, id STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX ORG_MASTER (PRIMARY_ID ENTITY STRING, GROUPTOORG STRING, DEPARTMENT STRING, UNIT STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX MSR (PRIMARY_ID UNIT STRING, MSR_DATE STRING, FROM_UNIT STRING, TO_UNIT STRING, GUDID STRING, QTY STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX PO (PRIMARY_ID UNIT STRING, PO_DATE STRING, VENDOR STRING, GUDID STRING, QTY STRING, UNIT_PRICE STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX SALES (PRIMARY_ID UNIT STRING, SALES_DATE STRING, STATUS STRING, SALES_RECEIPT_NUM STRING, CUSTOMER STRING, GUDID STRING, QTY STRING, UNIT_PRICE STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX SHIPRECEIPT (PRIMARY_ID UNIT STRING, SHIP_DATE STRING, STATUS STRING, SHIPMENT_NUM STRING, CUSTOMER STRING, GUDID STRING, QTY STRING, UNIT_PRICE STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX VENDOR (PRIMARY_ID brandName STRING, dunsNumber STRING, companyName STRING, rx STRING, otc STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE VERTEX VOUCHER (PRIMARY_ID UNIT STRING, VCHR_DATE STRING, STATUS STRING, VENDOR_INVOICE_NUM STRING, VENDOR STRING, GUDID STRING, QTY STRING, UNIT_PRICE STRING) WITH primary_id_as_attribute=&quot;true&quot;

CREATE DIRECTED EDGE by_UNSPSC (From GUDID, To UNSPSC)
CREATE DIRECTED EDGE PO_LOCATION_MASTER (From PO, To LOCATION_MASTER)
CREATE DIRECTED EDGE PO_ORG_MASTER (From PO, To ORG_MASTER)
CREATE DIRECTED EDGE PO_VENDOR (From PO, To VENDOR)
CREATE DIRECTED EDGE PO_GUDID (From PO, To GUDID)
CREATE DIRECTED EDGE MSR_LOCATION_MASTER (From MSR, To LOCATION_MASTER)
CREATE DIRECTED EDGE MSR_ORG_MASTER (From MSR, To ORG_MASTER)
CREATE DIRECTED EDGE MSR_VENDOR (From MSR, To VENDOR)
CREATE DIRECTED EDGE MSR_GUDID (From MSR, To GUDID)
CREATE DIRECTED EDGE SALES_LOCATION_MASTER (From SALES, To LOCATION_MASTER)
CREATE DIRECTED EDGE SALES_ORG_MASTER (From SALES, To ORG_MASTER)
CREATE DIRECTED EDGE SALES_VENDOR (From SALES, To VENDOR)
CREATE DIRECTED EDGE SALES_GUDID (From SALES, To GUDID)
CREATE DIRECTED EDGE SHIPRECEIPT_LOCATION_MASTER (From SHIPRECEIPT, To LOCATION_MASTER)
CREATE DIRECTED EDGE SHIPRECEIPT_ORG_MASTER (From SHIPRECEIPT, To ORG_MASTER)
CREATE DIRECTED EDGE SHIPRECEIPT_VENDOR (From SHIPRECEIPT, To VENDOR)
CREATE DIRECTED EDGE SHIPRECEIPT_GUDID (From SHIPRECEIPT, To GUDID)
CREATE DIRECTED EDGE VOUCHER_LOCATION_MASTER (From VOUCHER, To LOCATION_MASTER)
CREATE DIRECTED EDGE VOUCHER_ORG_MASTER (From VOUCHER, To ORG_MASTER)
CREATE DIRECTED EDGE VOUCHER_VENDOR (From VOUCHER, To VENDOR)
CREATE DIRECTED EDGE VOUCHER_GUDID (From VOUCHER, To GUDID)
&#39;&#39;&#39;)
results = conn.gsql(&#39;&#39;&#39;CREATE GRAPH P2PSCM(UNSPSC, GUDID, LOCATION_MASTER, ORG_MASTER, MSR, PO, SALES, SHIPRECEIPT, VENDOR, VOUCHER, 
by_UNSPSC, PO_LOCATION_MASTER, PO_ORG_MASTER, PO_VENDOR, PO_GUDID, MSR_LOCATION_MASTER, MSR_ORG_MASTER, MSR_VENDOR, MSR_GUDID, SALES_LOCATION_MASTER, SALES_ORG_MASTER, SALES_VENDOR, SALES_GUDID, SHIPRECEIPT_LOCATION_MASTER, SHIPRECEIPT_ORG_MASTER, SHIPRECEIPT_VENDOR, SHIPRECEIPT_GUDID, VOUCHER_LOCATION_MASTER, VOUCHER_ORG_MASTER, VOUCHER_VENDOR, VOUCHER_GUDID)&#39;&#39;&#39;)</code></pre><p><strong>Do NOT forget to publish your data mappings and load data.</strong></p><p><img src="https://github.com/AmitXShukla/P2P.ai/blob/main/docs/assets/images/graphp2p4.png?raw=true" alt="P2P Graph 4"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../facts/">« get Facts straight</a><a class="docs-footer-nextpage" href="../query/">data insights »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Thursday 28 April 2022 20:01">Thursday 28 April 2022</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
